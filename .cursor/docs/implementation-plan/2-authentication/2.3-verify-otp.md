# 2.3 –ó–∞–º–µ–Ω–∞ handleCheckCode

**‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2 —á–∞—Å–∞

## üéØ –¶–µ–ª—å

–ó–∞–º–µ–Ω–∏—Ç—å –º–æ–∫–æ–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–¥–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API –≤—ã–∑–æ–≤.

## üìã –®–∞–≥–∏

### 1. –ó–∞–º–µ–Ω–∞ handleCheckCode

```typescript
const { verifyOtp, isVerifyingOtp } = useAuthFlow();

const handleCheckCode = async () => {
  if (code.length !== 4) {
    setError("–í–≤–µ–¥–∏—Ç–µ 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥");
    return;
  }

  const result = await verifyOtp(phone, code);

  if (result.success) {
    const user = result.user;

    if (!user.name) {
      setWelcomeIndex(0);
      setStep(Step.Welcome);
    } else {
      setStep(Step.Success);
    }
    setError("");
  } else {
    setError("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥");
  }
};
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

```typescript
<button
  onClick={handleCheckCode}
  disabled={code.length !== 4 || isVerifyingOtp}
  className="btn-primary"
>
  {isVerifyingOtp ? "–ü—Ä–æ–≤–µ—Ä–∫–∞..." : "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥"}
</button>
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zustand (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```typescript
// –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Zustand store
import { useAppStore } from "../store";

const setUser = useAppStore((state) => state.setUser);

// –í handleCheckCode –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:
if (result.success) {
  setUser(result.user);
  // –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞...
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- [ ] –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ OTP —á–µ—Ä–µ–∑ API
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- [ ] –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —à–∞–≥–∏

- **–ü—Ä–µ–¥—ã–¥—É—â–∏–π:** [2.2 –ó–∞–º–µ–Ω–∞ handleSendCode](./2.2-send-otp.md)
- **–°–ª–µ–¥—É—é—â–∏–π:** [2.4 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏](./2.4-loading-states.md)
