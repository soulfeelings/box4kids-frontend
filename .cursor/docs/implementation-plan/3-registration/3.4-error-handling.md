# 3.4 –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 1.5 —á–∞—Å–∞

## üéØ –¶–µ–ª—å

–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫.

## üìã –®–∞–≥–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç –¥–ª—è –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `src/utils/errorHandling.ts`

```typescript
import { ApiError } from "../types/errors";

export const getErrorMessage = (error: unknown): string => {
  if (error instanceof ApiError) {
    switch (error.status) {
      case 400:
        return "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ";
      case 401:
        return "–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è";
      case 429:
        return "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ";
      case 500:
        return "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ";
      default:
        return error.message || "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞";
    }
  }

  if (error instanceof Error) {
    return error.message;
  }

  return "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞";
};

export const isNetworkError = (error: unknown): boolean => {
  return error instanceof ApiError && error.status === 0;
};
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ErrorMessage

**–§–∞–π–ª:** `src/components/ErrorMessage.tsx`

```typescript
import React from "react";

interface Props {
  error: string | null;
  onDismiss?: () => void;
}

export const ErrorMessage: React.FC<Props> = ({ error, onDismiss }) => {
  if (!error) return null;

  return (
    <div className="error-message">
      <span>{error}</span>
      {onDismiss && (
        <button onClick={onDismiss} className="error-dismiss">
          √ó
        </button>
      )}
    </div>
  );
};
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ LoginPage

```typescript
import { getErrorMessage } from "../utils/errorHandling";
import { ErrorMessage } from "../components/ErrorMessage";

const handleSendCode = async () => {
  // ...
  if (!result.success) {
    setError(getErrorMessage(result.error));
  }
};

const handleCheckCode = async () => {
  // ...
  if (!result.success) {
    setError(getErrorMessage(result.error));
  }
};

// –í JSX
<ErrorMessage error={error} onDismiss={() => setError("")} />;
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CSS –¥–ª—è –æ—à–∏–±–æ–∫

```css
.error-message {
  background: #fee;
  border: 1px solid #fcc;
  color: #c33;
  padding: 12px;
  border-radius: 4px;
  margin: 8px 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.error-dismiss {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- [ ] –£—Ç–∏–ª–∏—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ErrorMessage —Å–æ–∑–¥–∞–Ω
- [ ] –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] CSS —Å—Ç–∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —à–∞–≥–∏

- **–ü—Ä–µ–¥—ã–¥—É—â–∏–π:** [3.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zustand store](./3.3-zustand-integration.md)
- **–°–ª–µ–¥—É—é—â–∏–π:** [3.5 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏](./3.5-testing.md)
