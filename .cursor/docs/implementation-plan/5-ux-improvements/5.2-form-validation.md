# 5.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º

**‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2 —á–∞—Å–∞

## üéØ –¶–µ–ª—å

–£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º —Å –ø–æ–º–æ—â—å—é react-hook-form –∏ yup.

## üìã –®–∞–≥–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ yup

```bash
npm install yup @hookform/resolvers
```

### 2. –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–§–∞–π–ª:** `src/utils/validation.ts`

```typescript
import * as yup from "yup";

export const phoneSchema = yup.object({
  phone: yup
    .string()
    .required("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞")
    .min(7, "–ù–æ–º–µ—Ä —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π")
    .matches(/^\+?[0-9\s\-\(\)]+$/, "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç"),
});

export const childSchema = yup.object({
  name: yup
    .string()
    .required("–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ä–µ–±–µ–Ω–∫–∞")
    .min(2, "–ò–º—è —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ"),
  birthDate: yup
    .string()
    .required("–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è")
    .test("age", "–†–µ–±–µ–Ω–∫—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 3 –¥–æ 12 –ª–µ—Ç", (value) => {
      if (!value) return false;
      const age = calculateAge(value);
      return age >= 3 && age <= 12;
    }),
  gender: yup.string().required("–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª").oneOf(["male", "female"]),
  interests: yup.array().min(1, "–í—ã–±–µ—Ä–∏—Ç–µ –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å"),
});

export const deliverySchema = yup.object({
  address: yup.string().required("–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å"),
  city: yup.string().required("–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥"),
  postal_code: yup
    .string()
    .required("–í–≤–µ–¥–∏—Ç–µ –∏–Ω–¥–µ–∫—Å")
    .matches(/^\d{6}$/, "–ò–Ω–¥–µ–∫—Å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 6 —Ü–∏—Ñ—Ä"),
});
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–º–∞–º–∏

```typescript
import { yupResolver } from "@hookform/resolvers/yup";
import { childSchema } from "../utils/validation";

export const useChildForm = () => {
  const form = useForm<ChildFormData>({
    resolver: yupResolver(childSchema),
    defaultValues: getChildDraft() || {...},
    mode: "onChange", // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
  });

  return { form, ... };
};
```

### 4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

```typescript
// –í JSX —Ñ–æ—Ä–º—ã:
<input {...register("name")} className={errors.name ? "input-error" : ""} />;
{
  errors.name && <span className="field-error">{errors.name.message}</span>;
}
```

### 5. CSS –¥–ª—è –æ—à–∏–±–æ–∫

```css
.input-error {
  border-color: #e74c3c !important;
  box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.2);
}

.field-error {
  color: #e74c3c;
  font-size: 12px;
  margin-top: 4px;
  display: block;
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- [ ] Yup —Å—Ö–µ–º—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] React Hook Form –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] CSS —Å—Ç–∏–ª–∏ –¥–ª—è –æ—à–∏–±–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω—ã

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —à–∞–≥–∏

- **–ü—Ä–µ–¥—ã–¥—É—â–∏–π:** [5.1 –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏](./5.1-loading-indicators.md)
- **–°–ª–µ–¥—É—é—â–∏–π:** [5.3 –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è](./5.3-state-persistence.md)
