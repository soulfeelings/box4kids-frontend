# 6.1 Рефакторинг кода согласно code_splitting.md

**⏱️ Время выполнения:** 8 часов

## 🎯 Цель

Выполнить рефакторинг LoginPage.tsx согласно плану в `@code_splitting.md`.

## 📋 Этапы рефакторинга

### 1. Создание step-компонентов (2 часа)

Разбить LoginPage.tsx на отдельные step-компоненты:

- PhoneStep
- CodeStep
- WelcomeStep
- ChildStep
- CategoriesStep
- SubscriptionStep
- DeliveryStep
- PaymentStep
- SuccessStep

### 2. Выделение переиспользуемых UI компонентов (2 часа)

Создать в `src/components/shared/`:

- FormInput
- Button
- ProgressIndicator
- Modal
- Card

### 3. Выделение логики в хуки (2 часа)

Создать кастомные хуки:

- useMultiStepForm
- usePhoneValidation
- useOtpFlow
- useRegistrationFlow

### 4. Создание утилит (1 час)

Вынести утилитарные функции:

- phoneFormatter
- ageCalculator
- validationHelpers

### 5. Строгая типизация (1 час)

Добавить строгие типы для:

- Step компонентов
- Form данных
- API ответов
- Event handlers

## 📁 Итоговая структура

```
src/
├── components/
│   ├── auth/
│   │   ├── steps/
│   │   │   ├── PhoneStep.tsx
│   │   │   ├── CodeStep.tsx
│   │   │   └── ...
│   │   └── LoginFlow.tsx
│   └── shared/
│       ├── FormInput.tsx
│       ├── Button.tsx
│       └── ...
├── hooks/
│   ├── auth/
│   └── shared/
└── utils/
    ├── formatters.ts
    └── validators.ts
```

## ✅ Результат

После выполнения рефакторинга:

- [ ] LoginPage.tsx разбит на модули
- [ ] Код переиспользуется
- [ ] Поддержка упрощена
- [ ] Тестирование улучшено
- [ ] Типобезопасность максимальна

## 🔗 Подробный план

Полный план рефакторинга с конкретными шагами и кодом находится в файле `@code_splitting.md`.

## 🔗 Связанные шаги

- **Предыдущий:** [5.5 Добавление аналитики](../5-ux-improvements/5.5-analytics.md)
- **Следующий:** Завершение проекта ✅
