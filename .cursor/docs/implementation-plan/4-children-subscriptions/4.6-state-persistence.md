# 4.6 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2 —á–∞—Å–∞

## üéØ –¶–µ–ª—å

–û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º –º–µ–∂–¥—É —à–∞–≥–∞–º–∏.

## üìã –®–∞–≥–∏

### 1. –•—É–∫ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

**–§–∞–π–ª:** `src/hooks/useAutoSave.ts`

```typescript
import { useEffect } from "react";
import { useWatch } from "react-hook-form";
import { useAppStore } from "../store";

export const useAutoSave = (form: any, saveFunction: (data: any) => void) => {
  const watchedData = useWatch({ control: form.control });

  useEffect(() => {
    const timer = setTimeout(() => {
      if (Object.values(watchedData).some((val) => val !== "")) {
        saveFunction(watchedData);
      }
    }, 1000);

    return () => clearTimeout(timer);
  }, [watchedData, saveFunction]);
};
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ChildForm

```typescript
import { useAutoSave } from "../hooks/useAutoSave";

export const useChildForm = () => {
  const { saveChildDraft } = useAppStore();
  const form = useForm<ChildFormData>({...});

  // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
  useAutoSave(form, saveChildDraft);

  return { form, onSubmit, isSubmitting };
};
```

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ

```typescript
// –í useChildForm –¥–æ–±–∞–≤–∏—Ç—å:
useEffect(() => {
  const draft = getChildDraft();
  if (draft) {
    form.reset(draft);
  }
}, []);
```

### 4. –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"

```typescript
const { prevStep } = useStepNavigation();

<button onClick={prevStep} className="btn-secondary">
  –ù–∞–∑–∞–¥
</button>;
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ç—É–¥–∞-—Å—é–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —à–∞–≥–∏

- **–ü—Ä–µ–¥—ã–¥—É—â–∏–π:** [4.5 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zustand –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](./4.5-zustand-navigation.md)
- **–°–ª–µ–¥—É—é—â–∏–π:** [4.7 –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö](./4.7-final-submit.md)
